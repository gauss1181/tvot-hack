(function(){var d=i(function(){preview.positionNotes();preview.showNotes()},400),e=null,b={menuElement:null,isOpen:a,toggle:f,open:open,close:close,debouncePositionNotes:d,width:0},h=300,c=null,g=null;function a(){return !e.classList.contains("closed")}function f(){e.classList.toggle("closed");b.width=a()?h:0;preview.hideNotes();d();preview.setAvailableRect();try{preview.scaleFrame()}catch(j){}}function i(n,q,k){var p,l,m,o,j;return function(){m=this;l=arguments;o=new Date();var s=function(){var t=(new Date())-o;if(t<q){p=setTimeout(s,q-t)}else{p=null;if(!k){j=n.apply(m,l)}}};var r=k&&!p;if(!p){p=setTimeout(s,q)}if(r){j=n.apply(m,l)}return j}}document.addEventListener("DOMContentLoaded",function(){e=b.menuElement=document.getElementById("previewMenu");if(!e){return}c=document.getElementById("previewPage");g=c.contentWindow;if(c){c.addEventListener("load",function(){g=c.contentWindow;if(e.querySelector("#previewShowLinks").checked){g.document.body.classList.add("highlight-links")}})}document.getElementById("restartPreview").addEventListener("click",function(m){if(g&&g.preview){g.preview.restart()}});function j(m,n){c.style.transition="all 0.3s";c.style.webkitTransform=c.style.mozTransform=c.style.transform="scale("+n.value+")";g.preview.useZoomSlider=true;preview.pageScale=n.value;preview.hideNotes();d()}function l(m,n){$("#previewPage").addClass("user-scaling")}function k(m,n){$("#previewPage").removeClass("user-scaling")}$("#previewZoomSlider").slider({range:"min",min:0.05,max:4,step:0.01,start:l,slide:j,change:k,stop:k});document.getElementById("previewShowLinks").addEventListener("change",function(m){if(g){if(m.target.checked){g.document.body.classList.add("highlight-links")}else{g.document.body.classList.remove("highlight-links")}}});document.getElementById("previewShowNotes").addEventListener("change",function(m){if(m.target.checked){preview.getNotesElement().style.display="";preview.positionNotes()}else{preview.getNotesElement().style.display="none"}});document.getElementById("previewBestFit").addEventListener("click",function(m){g.preview.useZoomSlider=false;preview.hideNotes();d();preview.scaleFrame();$("#previewZoomSlider").slider("value",preview.currentFrameScale)});document.getElementById("previewFullscreen").addEventListener("click",function(m){g.preview.useZoomSlider=false;preview.hideNotes();d();preview.scaleFrame(undefined,undefined,true);$("#previewZoomSlider").slider("value",preview.currentFrameScale)})});window.previewMenu=b}());